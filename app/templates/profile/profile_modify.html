{% extends 'base.html' %}
{% block content %}
<div class="row justify-content-lg-center px-2">
    <div class="col-lg-6">
        <h4 class="my-3 border-bottom pb-2" style="font: 2em '빛의 계승자 Bold';">내정보 수정</h4>
        <form method="post" enctype="multipart/form-data">
            {{ form.csrf_token }}
            {% include "form_errors.html" %}
            <!-- 아이디 -->
            <div class="mb-4">
                <div class="d-flex">
                    <label for="username">아이디</label>
                    <a href="javascript:resetProfileInfo('username', '{{ user.username }}')"><i class="bi bi-arrow-repeat mx-2"></i></a>
                </div>
                <input type="text" class="form-control" name="username" id="username" value="{{ form.username.data or '' }}">
            </div>

            <!-- 닉네임 -->
            <div class="mb-4">
                <div class="d-flex">
                    <label for="nickname">닉네임</label>
                    <a href="javascript:resetProfileInfo('nickname', '{{ user.nickname }}')"><i class="bi bi-arrow-repeat mx-2"></i></a>
                </div>
                <input type="text" class="form-control" name="nickname" id="nickname" value="{{ form.nickname.data or '' }}">
            </div>

            <!-- 비밀번호 -->
            <div class="mb-4">
                <div class="d-flex justify-content-between">
                    <label for="password">비밀번호</label>
                    <label class="text-danger">※ 바꿀 때만 입력하세요!</label>
                </div>
                <input type="password" class="form-control" name="password" id="password">
            </div>
            <div class="mb-4">
                <label for="password_validate">비밀번호 확인</label>
                <input type="password" class="form-control" name="password_validate" id="password_validate">
            </div>

            <!-- 이메일 -->
            <div class="mb-4">
                <div class="d-flex">
                    <label for="email">이메일</label>
                    <a href="javascript:resetProfileInfo('email', '{{ user.email }}')"><i class="bi bi-arrow-repeat mx-2"></i></a>
                </div>
                <input type="text" class="form-control" name="email" id="email" value="{{ form.email.data or '' }}">
            </div>

            <!-- 자기소개 -->
            <div class="mb-4">
                <div class="d-flex">
                    <label for="about_me">자기소개</label>
                    <a href="javascript:resetProfileInfo('about_me', '{{ user.about_me }}')"><i class="bi bi-arrow-repeat mx-2"></i></a>
                </div>
                <textarea class="form-control" name="about_me" id="about_me" rows="5" style="resize: none;">{{ form.about_me.data or '' }}</textarea>
            </div>

            <!-- 프로필 사진 -->
            <div class="mb-2">
                <div class="d-flex justify-content-between">
                    <label for="profile_image">프로필 사진</label>
                    <label class="text-danger">※ 바꿀 때만 선택하세요!</label>
                </div>
                <input type="file" class="form-control" name="profile_image" id="profile_image" value="profile_image">
            </div>

            <div class="d-flex justify-content-end gap-2">
                <button type="submit" class="btn btn-primary my-3">수정</button>
                <button type="submit" class="btn btn-danger my-3">취소</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block script %}
<script>
function resetProfileInfo(infoType, originalInfo) {
    document.getElementById(infoType).value = originalInfo;
}
</script>
{% endblock %}
